# ShieldUs 애플리케이션 개요

## 개요

사용자들이 프로그래밍 문제를 풀고, 자신의 풀이를 제출하며, 다른 문제들을 탐색하고, 필요시 관리자와 소통할 수 있는 온라인 코딩 테스트 플랫폼입니다.  
JWT 기반 인증을 통해 안전한 사용자 경험을 제공하며, 명확한 예외 처리로 안정성을 높였습니다.

---

## 1. 계정 관리

### 1.1 회원가입 (Register)

- 입력: 이메일, 비밀번호, 이름, 전화번호
- 유효성 검사: `@Email`, `@NotBlank`, `@Size`, `@Pattern`
- 처리 흐름:
    - 이메일 중복 확인 → 중복 시 409 Conflict
    - 비밀번호 해싱 (BCrypt)
    - Member 저장 (기본 권한: USER)
    - 응답: 회원가입 성공 메시지

### 1.2 로그인 (Login)

- 입력: 이메일, 비밀번호
- 처리 흐름:
    - JwtAuthenticationFilter → 인증 실패 시 401
    - 인증 성공 시 JWT 발급 (Authorization: Bearer {token})
- 응답: 로그인 성공 후 대시보드 이동

### 1.3 내 정보 조회 (My Page)

- 요청: `GET /api/members/me` (JWT 포함)
- 응답: 이름, 이메일, pass 문제 목록 (MyPageResponseDto)

### 1.4 회원 정보 수정 (Update Profile)

- 요청: `PUT /api/members/me`
- 입력: MemberUpdateRequestDto
- 처리: 이메일 중복 검사, 비밀번호 재암호화
- 응답: 수정 완료 메시지

### 1.5 회원 탈퇴 (Soft Delete)

- 요청: `DELETE /api/members/me`
- 처리: `isDeleted = true`, `deletedAt = now`
- 응답: 성공 → 로그아웃 처리

---

## 2. 문제 관리

### 2.1 문제 목록 조회 (List Problems)

- 요청: `GET /api/problems`
- 필터: 카테고리, 난이도, 제목, 풀이 여부
- 처리:
    - QueryDSL로 동적 쿼리 작성
    - 로그인 사용자 → 풀이 여부 포함
- 응답: ProblemResponseDto + 페이지네이션

### 2.2 문제 상세 조회 (View Problem Detail)

- 요청: `GET /api/problems/{problemId}`
- 처리:
    - Problem, 작성자, TestCase 조회
    - 로그인 사용자 풀이 여부 포함
- 응답: ProblemDetailDto

### 2.3 문제 생성 (Create Problem) - ADMIN 전용

- 요청: `POST /api/problems` (JWT + ADMIN)
- 입력: CreateProblemRequestDto + TestCase 목록
- 처리:
    - 카테고리 확인
    - Problem + TestCase 저장
- 응답: 생성된 문제 ID

### 2.4 문제 수정 (Update Problem) - ADMIN 전용

- 요청: `PUT /api/problems/{id}`
- 입력: UpdateProblemRequestDto
- 처리:
    - 기존 TestCase 수정/삭제
    - 새 TestCase 추가
- 응답: 수정된 문제 ID

### 2.5 문제 삭제 (Soft Delete Problem) - ADMIN 전용

- 요청: `DELETE /api/problems/{id}`
- 처리: `isDeleted = true`, `deletedAt = now`
- 응답: 성공 메시지

---

## 3. 문제 풀이 및 제출

### 3.1 컴파일 및 테스트 제출

- 요청: `POST /api/problems/compile`
- 입력: CompileRequestDto (문제 ID, 코드, 언어)
- 처리:
    - 예제 TestCase 조회
    - Judge 서버에 채점 요청
- 응답: CompileResponseDto (입력/기대/실제 출력 등)

### 3.2 정답 코드 제출

- 요청: `POST /api/problems/{id}/submit`
- 입력: CompileRequestDto
- 처리:
    - 모든 TestCase 채점
    - MemberSubmitProblem 저장 또는 업데이트
    - MemberTempCode 상태 저장
- 응답: 채점 결과 및 정답 여부

### 3.3 이전 제출 코드 확인

- 요청: `GET /api/problems/{id}/submissions`
- 처리: 최신 제출 이력 조회
- 응답: 제출 코드 + 상태 (성공/실패 등)

---

## 4. 관리자 기능 (ADMIN Only)

### 4.1 사용자 목록 조회

- 요청: `GET /api/admin/members`
- 처리: 모든 사용자 목록 조회
- 응답: MemberListResponseDto

### 4.2 사용자 정보 강제 수정

- 요청: `PUT /api/admin/members/{id}`
- 입력: MemberUpdateRequestDto
- 처리: 역할 변경 가능, 비밀번호 암호화
- 응답: 수정 완료 메시지

### 4.3 사용자 강제 탈퇴

- 요청: `DELETE /api/admin/members/{id}`
- 처리: `isDeleted = true`, `deletedAt = now`
- 응답: 성공 메시지

---

## 부록: 로그인 시나리오 요약

1. 로그인 시도 → 이메일, 비밀번호 입력
2. DB 조회 → 존재하면 JWT 발급
3. 실패 시: 401 Unauthorized
4. 이후 요청 시 `Authorization` 헤더에 JWT 포함

